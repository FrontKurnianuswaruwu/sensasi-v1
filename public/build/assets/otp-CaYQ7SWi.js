import{$ as e}from"./jquery-BvxTx_lq.js";window.$=window.jQuery=e;e(document).ready(function(){e("#otpForm").on("submit",function(t){t.preventDefault(),e("#otp-error").addClass("hidden");let i=e("#otp").val().trim(),a=e("#otpForm").data("email");if(i.length!==6){e("#otp-error").text("OTP harus 6 digit").removeClass("hidden");return}e("#verifyText").addClass("hidden"),e("#verifyLoading").removeClass("hidden"),e("#verifyBtn").prop("disabled",!0),e.ajax({url:"/verify-otp",type:"POST",data:{email:a,otp:i,_token:e('meta[name="csrf-token"]').attr("content")},success:function(){o("OTP berhasil diverifikasi!"),setTimeout(()=>window.location.href="/login",1500)},error:function(r){let n=r.responseJSON?.message??"OTP tidak valid";e("#otp-error").text(n).removeClass("hidden")},complete:function(){e("#verifyText").removeClass("hidden"),e("#verifyLoading").addClass("hidden"),e("#verifyBtn").prop("disabled",!1)}})});function o(t){e("#toast-message").text(t),e("#toast").fadeIn(),setTimeout(()=>e("#toast").fadeOut(),3e3)}e("#resendOtp").on("click",function(){const t=e("#otpForm").data("email");e(this).prop("disabled",!0).text("Mengirim..."),e.ajax({url:"/resend-otp",type:"POST",data:{email:t,_token:e('meta[name="csrf-token"]').attr("content")},success:function(){o("OTP baru berhasil dikirim ke email!")},error:function(i){let a=i.responseJSON?.message??"Gagal mengirim OTP";o(a)},complete:function(){e("#resendOtp").prop("disabled",!1).text("Kirim Ulang OTP")}})})});
